https://tryhackme.com/room/psychobreak
1. zaczynam od wdrożenia maszyny THM i uruchomienia Kali_Linux.
2. Następnie łączę się przez vpn z THM i sprawdzam w BROWSER co mi pokaże na tym hosicie.
![](/)
- jest aplikacja internetowa z opisem. Sprawdzam czego dotyczy opis i co siedzi podspodem.
* Dzięki narzędzią developerskim w BROWER mogłem zobaczyć kod aplikacji i znaleść komentarz ``` Sebastian sees a path through the darkness which leads to a room => /sadistRoom ```
![](/)
	Jak widać kieruje on do podstrony ```/sadistRoom``` gdzie znalazłem ```Key to locker Room => 532219a04ab7a02b56faafbec1a4c1ea``` zdobyłem odpowiedź na jedno pytanie.
- To znalezisko nakierowało mnie na urzycie narzędzia ```gobuster```, pełne polecenie którego urzyłem to:
```gobuster dir -u 10.10.16.153 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt``` Niestety również pudło.
![](/)
3. na kalim tworzę katalog w związku z tym testem ```mkdir psychobreak```
4. uruchamiam narzędzie nmap poleceniem ```sudo nmap -Pn -A -sV --script=default,vuln -p- --open -oA IP_nmap_vulns IP```
- wyszukując otwarte porty poleceniem:
```
└─$ cat nmap_10.10.16.153.nmap |  grep open
# Nmap 7.93 scan initiated Sat May  6 03:54:37 2023 as: nmap -Pn -A -sV --script=default,vuln -p- --open -oA nmap_10.10.16.153 10.10.16.153
21/tcp open  ftp     ProFTPD 1.3.5a
22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.10 (Ubuntu Linux; protocol 2.0)
|   cpe:/a:openbsd:openssh:7.2p2: 
80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))
|       Slowloris tries to keep many connections to the target web server open and hold
|       them open as long as possible.  It accomplishes this by opening connections to
```
Mogę określić, że otwarte porty to 21 -ftp, 22 -ssh, 80 -thhp i system operacyjny to ```Ubuntu```. wiem już ile jest otwartych portów i znam system operacyjny.
Sprawdzę co pokaże mi narzędzie ```enum4linux``` z flaga ```-a```. Niestety. Nic ciekawego nie znalazłem.
Postanowiłem zobaczyc co pokaże mi narzędzie ```zapp```, uruchomiłem automatyczne skanowanie na host ```http://10.10.16.153/``` 
po przejrzeniu wyników zrobiłem to samo dla hosta ```http://10.10.16.153/sadistRoom```
![]()
Znalazłem kolejną podstrone ```/lockerRoom``` i sprawdzam co się na niej znajduje w przeglądarce.
![]()


### Niestety w między czasie wygasła mi ATAKOWANA_MASZYNA, po kolejnym uruchomieniu IP_MASZYNY będzie inne ale cała reszta którą odnalazłem będzie się zgadzać.

Na odnalezionej stronie jest opis mówiący o zdekodowaniu: ```"Tizmg_nv_zxxvhh_gl_gsv_nzk_kovzhv"``` wpisując w google ```decode "Tizmg_nv_zxxvhh_gl_gsv_nzk_kovzhv"```
znalazłem narzędzie: ```https://www.guballa.de/vigenere-solver``` zmieniałem w ciemno ustawienia ```Cipher Variant``` aż trafiłem na właściwe.
![]()
Dzieki temu dostalem się do zasobu ```map.php```
![]()
Dzięki temu mogę wejść w nowe katalogi takie jak ```Safe Haeven``` i ```The Abandoned Room``` ten drugi wymaga klucza więc skupiam się na ```Safe Heaven```.
![]()
Wracam do ```zaproxy``` i wyliczam automatycznie ```http://10.10.207.142/SafeHeaven/``` to mnie prowadzi do ```/imgs``` niestety nic tam ciekawego nie znajduję.
Postanowiłem spróbować jeszcze raz wyliczyć katalogi za pomocą ```gobuster``` za pomocą polecenia:
```
gobuster dir -u http://10.10.207.142/SafeHeaven/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
```
Znalazłem katalog ```/keeper```, wróciłem do narzędzia ```zaproxy``` i ```BROWSER```. Nastepnie przechodzę do katalogu `````, 
dalej zgodnie z podpowiedzią pobieram zdjęci i przeciągam je do wyszukiwarki ```google.com```.
Takim sposobem zdobyłem dostęp do wcześniej nie dostępnego katalogu ```The Abandoned Room```, po wprowadzeniu danych uwierzytelniających mnie zostałem przeniesiony na:
```
http://10.10.207.142/abandonedRoom/be8bc662d1e36575a52da40beba38275/index.php
```
![]()
Idąc dalej znalazłem ciekawą stronę która kazała mi uciakać. Postanowiłem wyliczyć ją za pomocą ```zaproxy```. Dzięki temu znalazłem kolejne zasoby takie jak ```//assets```.
Ciekawe czy ```gobuster``` znajdzie jakieś ukryte katalogi na podstronie ```http://10.10.207.142/abandonedRoom/be8bc662d1e36575a52da40beba38275/```

 There is something called "shell" on current page maybe that'll help you to get out of here !!!
 To find more about the Spider Lady visit https://theevilwithin.fandom.com/wiki/Laura_(Creature) 

######################################################################################################################
Podpowiedzi sugerują mi podatność [SQL injection (SQLi)](https://portswigger.net/web-security/sql-injection) możlieość wstrzykiwania komend w pasek poleceń. Idąc tym tropem spróbujmy spróbuję kilka poleceń.
Po sprawdzeniu kilku komend i przekonaniu się, że tylko mi działa ```ls``` inne które sprawdziłem i ```ls``` z jakim kolwiek parametrem okazały się być komendami niezanymi.
Nawet po zakodowaniu ```spacjii``` w ```html``` za pomocą ```%20``` lub ```&nbsp;```. Okazało się, że 
![]()

680e89809965ec41e64dc7e447f175ab be8bc662d1e36575a52da40beba38275


####
Dekodowanie pliku audio ```wav``` który zawiera nagranie zakodowane ```alfabetem morsa```. W wyszukaniu możliwości dekodowania plików audio z nagraną wiadomością w alfabecie morsa postanowiłem wykorzystać [CatGPT]().
```
Ja
jak zdekodować plik wav z kodem morsa?

ChatGPT
Aby zdekodować plik WAV z kodem Morse'a, możesz skorzystać z programu odtwarzającego dźwięk i transkrybującego sygnał dźwiękowy na tekst, lub z narzędzi dostępnych w linii komend.

Przykładowe narzędzia dostępne w linii komend do dekodowania kodu Morse'a z pliku WAV to np. "morse2txt" lub "morse". Aby z nich skorzystać, wykonaj następujące kroki:

Upewnij się, że narzędzia są zainstalowane na Twoim systemie (jeśli nie, możesz zainstalować je przy pomocy menadżera pakietów Twojej dystrybucji Linux).

Otwórz terminal i przejdź do katalogu, w którym znajduje się plik WAV z kodem Morse'a.

Wykonaj polecenie, aby przekonwertować plik WAV na tekst:

Copy code
morse2txt nazwa_pliku.wav
lub

Copy code
morse -d nazwa_pliku.wav
Po wykonaniu powyższego polecenia, na ekranie pojawi się zdekodowana wiadomość w kodzie Morse'a z pliku WAV.
Zauważ, że dekodowanie kodu Morse'a z pliku WAV może wymagać pewnego doświadczenia w odsłuchiwaniu sygnałów dźwiękowych oraz w interpretacji znaków w kodzie Morse'a.
```
Niestety z narzędziami ```Linuxsowymi``` miałem problem i nie chciało mi to działać. Dałem drugą szansę lecz tym razem sprecyzowałem swoje pytanie do narzędzie ```online```.
```
Ja
czy są jakieś online narzędzia to tego rozkodowania?

ChatGPT
Tak, istnieje wiele narzędzi online, które pozwalają na dekodowanie plików dźwiękowych z kodem Morse'a na tekst. Możesz spróbować użyć jednego z poniższych:

https://morsecode.world/international/decoder/audio-decoder-adaptive.html
https://morsecode.scphillips.com/labs/audio-decoder-adaptive/
https://morsecode.ninja/audio-decoder-adaptive/
Wymagają one przesłania pliku dźwiękowego (np. w formacie WAV) na serwer, który następnie przetwarza go na tekst.
```
Pierwsze narzedzie zadziałało idealnie. Mam już wiedzę o otwartych portach wraz z usługami, username: ```joseph``` i ip maszyny atakowanej. Moge teraz spróbować zaatakować słownikowo każdą z usług.
Zaczne od ```ftp``` za pomocą narzędzia ```hydra``` poleceniem:
```
hydra -t 4 -l joseph -P /usr/share/wordlists/rockyou.txt -vV 10.10.236.65 ftp
```
Ponieważ to bardzo długo trfa, zacząłem szukać innej opcjiza pomocą narzędzia ```steghide``` okazało się, że plik którego jeszcze nie wykorzystałem a był rzeczywistym zdjęciem ma w sobie ukrytą wiadomość ```.txt``` 
wydzieliłem ten plik i znalazłem tam hasło do ftp. Kończę pracę ```hydry```. Po zalogowaniu  pomocą zdobytych poświadczeć ```username: joseph, password: intotheterror445``` loguję się na ```ftp```.
Następnie sprawcam do jakich katalogów mam dostęp. Okazuję się, że nie mogę poruszać się po katalogach więc pobieram wszystkie pliki do których mam dostęp i je badam.
Plik ```random.dic``` wygląda jak lista haseł, ciekawa rzecz się dzieje gdy sprawdzam czym jest plik ```program```
```
$ file program  
program: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, BuildID[sha1]=294d1f19a085a730da19a6c55788ec08c2187039, stripped
```
Wracam do ```ChatGPT``` sprawdzić co mi może powiedzieć na ten temat.
```
Ja
co to oznacza: $ file program  
program: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, BuildID[sha1]=294d1f19a085a730da19a6c55788ec08c2187039, stripped

ChatGPT
Polecenie file w Linuksie służy do określania typu pliku na podstawie jego zawartości. W przypadku wywołania file program, wynik informuje, że program jest plikiem wykonywalnym ELF (Executable and Linkable Format) przeznaczonym dla systemu Linux na architekturze x86-64 (64-bitowa). Plik jest dynamicznie linkowany, posiada interpreter /lib64/ld-linux-x86-64.so.2, jest przeznaczony dla systemu GNU/Linux w wersji 2.6.32, posiada unikalny identyfikator kompilacji i został "stripped" (usunięte zostały informacje debugowania).

Ja
co mogę zrobić z tym plikiem?

ChatGPT
To jest informacja o typie pliku, która została wygenerowana przez polecenie file. Plik program jest plikiem wykonywalnym (ELF), przeznaczonym dla systemu Linux (GNU/Linux). Zawiera kod maszynowy, który może być wykonany na procesorze x86-64.

Co dokładnie możesz zrobić z tym plikiem, zależy od twojego celu. Jeśli jest to program, którego działanie jest ci nieznane, możesz spróbować uruchomić go i zobaczyć, co się stanie. Możesz to zrobić, wpisując ./program.

Możesz także spróbować przeanalizować kod źródłowy programu, jeśli jest dostępny, aby zrozumieć, co robi. W każdym przypadku zalecam zachowanie ostrożności, ponieważ uruchomienie nieznanych programów z Internetu może być niebezpieczne.
```
   
